<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Bayesian Paired comparison  regression models in Stan — bpc • bpcs</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Bayesian Paired comparison  regression models in Stan — bpc" />
<meta property="og:description" content="This is the main function of the package.
This function utilizes precompiled stan models to sample the posterior distribution of the specified model with the input data.
For more information and larger examples of usage see the vignettes." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">bpcs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/a_get_started.html">Getting started</a>
    </li>
    <li>
      <a href="../articles/b_ties_and_home_advantage">Ties and me advantage</a>
    </li>
    <li>
      <a href="../articles/c_bt_random_effects">Random effects</a>
    </li>
    <li>
      <a href="https://arxiv.org/pdf/2101.11227.pdf">Paper: Bayesian Paired-Comparison with the bpcs package</a>
    </li>
    <li>
      <a href="https://davidissamattos.github.io/bpcs-online-appendix/">Online appendix for the paper</a>
    </li>
    <li>
      <a href="../articles/e_contributing.html">Contributing guide</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/davidissamattos/bpcs/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Bayesian Paired comparison  regression models in Stan</h1>
    <small class="dont-index">Source: <a href='https://github.com/davidissamattos/bpcs/blob/master/R/bpc.R'><code>R/bpc.R</code></a></small>
    <div class="hidden name"><code>bpc.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This is the main function of the package.
This function utilizes precompiled stan models to sample the posterior distribution of the specified model with the input data.
For more information and larger examples of usage see the vignettes.</p>
    </div>

    <pre class="usage"><span class='fu'>bpc</span><span class='op'>(</span>
  <span class='va'>data</span>,
  <span class='va'>player0</span>,
  <span class='va'>player1</span>,
  player0_score <span class='op'>=</span> <span class='cn'>NULL</span>,
  player1_score <span class='op'>=</span> <span class='cn'>NULL</span>,
  result_column <span class='op'>=</span> <span class='cn'>NULL</span>,
  z_player1 <span class='op'>=</span> <span class='cn'>NULL</span>,
  cluster <span class='op'>=</span> <span class='cn'>NULL</span>,
  subject_predictors <span class='op'>=</span> <span class='cn'>NULL</span>,
  predictors <span class='op'>=</span> <span class='cn'>NULL</span>,
  <span class='va'>model_type</span>,
  solve_ties <span class='op'>=</span> <span class='st'>"random"</span>,
  win_score <span class='op'>=</span> <span class='st'>"higher"</span>,
  priors <span class='op'>=</span> <span class='cn'>NULL</span>,
  chains <span class='op'>=</span> <span class='fl'>4</span>,
  parallel_chains <span class='op'>=</span> <span class='fl'>4</span>,
  iter <span class='op'>=</span> <span class='fl'>2000</span>,
  warmup <span class='op'>=</span> <span class='fl'>1000</span>,
  show_chain_messages <span class='op'>=</span> <span class='cn'>FALSE</span>,
  seed <span class='op'>=</span> <span class='cn'>NULL</span>,
  log_lik <span class='op'>=</span> <span class='cn'>T</span>,
  dir <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A data frame containing the observations. The other parameters specify the name of the columns</p></td>
    </tr>
    <tr>
      <th>player0</th>
      <td><p>A string with name of the column containing the players 0. This column should be of string/character type and not be of factor type.</p></td>
    </tr>
    <tr>
      <th>player1</th>
      <td><p>A string with name of the column containing the players 0. This column should be of string/character type and not be of factor type.</p></td>
    </tr>
    <tr>
      <th>player0_score</th>
      <td><p>A string with name of the column containing the scores of players 0</p></td>
    </tr>
    <tr>
      <th>player1_score</th>
      <td><p>A string with name of the column containing the scores of players 1</p></td>
    </tr>
    <tr>
      <th>result_column</th>
      <td><p>A string with name of the column containing the winners. 0 for player 0, 1 for player 1 and 2 for ties</p></td>
    </tr>
    <tr>
      <th>z_player1</th>
      <td><p>A string with the name of the column containing the order effect for player 1. E.g. if player1 has the home advantage this column should have 1 otherwise it should have 0</p></td>
    </tr>
    <tr>
      <th>cluster</th>
      <td><p>A vector with strings with the names of the column containing the clusters for the observation. To be used with a random effects model. This column should contain strings</p></td>
    </tr>
    <tr>
      <th>subject_predictors</th>
      <td><p>A vector with strings with the name of the columns for the subject predictors. Since all S parameters follow the same normal prior centered in 0 we recommend that the predictors, if numeric are normalized, for example the base scale function</p></td>
    </tr>
    <tr>
      <th>predictors</th>
      <td><p>A data frame that contains the players predictors values when using a generalized model. Only numeric values are accepted. Booleans are accepted but will be cast into integers. The first column should be for the player name, the others will be the predictors.  The column names will be used as name for the predictors</p></td>
    </tr>
    <tr>
      <th>model_type</th>
      <td><p>We first add a base model 'bt' or 'davidson' and then additional options with '-'. The additional options are '-U', '-generalized', '-ordereffect', '-subjectpredictors'. Below are some examples:</p><ul>
<li><p>'bt' for the Bradley Terry model. Ref: Bradley-Terry 1952,</p></li>
<li><p>'davidson' the Davidson model to handle for ties. Ref: Davidson 1970</p></li>
<li><p>'bt-ordereffect' for the Bradley-Terry with order effect, for home advantage. Ref: Davidson 1977</p></li>
<li><p>'davidson-ordereffect' for the Davidson model with order effect, for home advantage, and ties. Ref: Davidson 1977</p></li>
<li><p>'bt-generalized': for the generalized Bradley Terry model for subject specific predictors. Ref: Springall 1973</p></li>
<li><p>'davidson-generalized' for the generalized Davidson model for subject specific predictors</p></li>
<li><p>'bt-U': for the Bradley-Terry with random effects. Ref: Bockenholt 2001</p></li>
<li><p>'bt-subjectpredictors': for the Bradley-Terry with subject predictors. Ref: Bockenholt 2001</p></li>
<li><p>'davidson-U': For Davidson model with random effects</p></li>
<li><p>'bt-ordereffect-U' for Bradley-Terry with order effects and random effects, use similar syntax for other variations by appending the correct options</p></li>
</ul></td>
    </tr>
    <tr>
      <th>solve_ties</th>
      <td><p>A string for the method of handling ties.</p><ul>
<li><p>'random' for converting ties randomly,</p></li>
<li><p>'remove' for removing the tie occurrences</p></li>
<li><p>'none' to ignore ties. This requires a model capable of handling  ties</p></li>
</ul></td>
    </tr>
    <tr>
      <th>win_score</th>
      <td><p>A string that indicates if which score should win</p><ul>
<li><p>'higher' score is winner</p></li>
<li><p>'lower' score is winner</p></li>
</ul></td>
    </tr>
    <tr>
      <th>priors</th>
      <td><p>A list with the parameters for the priors.</p><ul>
<li><p>'prior_lambda_mu' Mean value of the lambda parameter in the all models. For the generalized this is also the prior for the B the parameter for  lambda ~ normal(mu, std). Default = 0</p></li>
<li><p>'prior_lambda_std' Standard deviation of the lambda parameter in the all models. lambda ~ normal(mu, std). Default = 3.0</p></li>
<li><p>'prior_nu_mu' Mean value of the nu parameter in the Davidson  models. nu ~ normal(mu, std)</p></li>
<li><p>'prior_nu_std' Standard deviation ofnu parameter in the Davidson  models. nu ~ normal(mu, std). Default = 0.3</p></li>
<li><p>'prior_gm_mu' Mean value of the gm in the ordered effect model. gm ~ normal(mu, std). Default = 0</p></li>
<li><p>'prior_gm_std' Standard deviation of the gm parameter in the ordered effect model. gm ~ normal(mu, std). Default =</p></li>
<li><p>'prior_U1_std' Standard deviation of the U1 parameter in the random effects model. U ~ normal(0, std). Default = 3.0</p></li>
<li><p>'prior_U2_std' Standard deviation of the U2 parameter in the random effects model. U ~ normal(0, std). Default = 3.0</p></li>
<li><p>'prior_U3_std' Standard deviation of the U3 parameter in the random effects model. U ~ normal(0, std). Default = 3.0</p></li>
<li><p>'prior_S_std' Standard deviation of the subject predictors parameter. S ~ normal(0,S_std). This for all predictors</p></li>
</ul></td>
    </tr>
    <tr>
      <th>chains</th>
      <td><p>Number of chains passed to Stan sampling. Positive integer, default=4. For more information consult Stan documentation</p></td>
    </tr>
    <tr>
      <th>parallel_chains</th>
      <td><p>Number of parallel chains</p></td>
    </tr>
    <tr>
      <th>iter</th>
      <td><p>Number of iterations passed to Stan sampling. Positive integer, default =2000. For more information consult Stan documentation</p></td>
    </tr>
    <tr>
      <th>warmup</th>
      <td><p>Number of iteration for the warmup passed to Stan sampling. Positive integer, default 1000.  For more information consult Stan documentation</p></td>
    </tr>
    <tr>
      <th>show_chain_messages</th>
      <td><p>FALSE (default) to hide chain messages from Stan; TRUE to show</p></td>
    </tr>
    <tr>
      <th>seed</th>
      <td><p>a random seed for Stan</p></td>
    </tr>
    <tr>
      <th>log_lik</th>
      <td><p>boolean. Calculate Log-likelihood for loo and waic?</p></td>
    </tr>
    <tr>
      <th>dir</th>
      <td><p>directory to save the csv files produced by cmdstanr. The default is in the current working directory at the .bpcs folder</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of the class bpc. This object should be used in conjunction with the several auxiliary functions from the package</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    
<ol>
<li><p>Bradley RA, Terry ME 1952. Rank Analysis of Incomplete Block Designs I: The Method of Paired Comparisons. Biometrika, 39, 324 45.</p></li>
<li><p>Davidson RR 1970. On Extending the Bradley-Terry Model to Accommodate Ties in Paired Comparison Experiments. Journal of the American Statistical Association, 65, 317 328.</p></li>
<li><p>Davidson, Roger R., and Robert J. Beaver 1977. "n extending the Bradley-Terry model to incorporate within-pair order effects. Biometrics: 693 702.</p></li>
<li><p>Stan Development Team 2020. RStan: the R interface to Stan. R package version 2.21.2.</p></li>
<li><p>Bockenholt, Ulf. Hierarchical modeling of paired comparison data. Psychological Methods 6.1 2001: 49.</p></li>
<li><p>Springall, A. Response Surface Fitting Using a Generalization of the Bradley-Terry Paired Comparison Model. Journal of the Royal Statistical Society: Series C Applied Statistics 22.1 1973: 59 68.</p></li>
</ol>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \donttest{</span>
<span class='co'>#For the simple Bradley-Terry model</span>
<span class='fu'>bpc</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tennis_agresti</span>,
player0 <span class='op'>=</span> <span class='st'>'player0'</span>,
player1 <span class='op'>=</span> <span class='st'>'player1'</span>,
result_column <span class='op'>=</span> <span class='st'>'y'</span>,
model_type <span class='op'>=</span> <span class='st'>'bt'</span>,
solve_ties <span class='op'>=</span> <span class='st'>'none'</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Running MCMC with 4 parallel chains...
#&gt; 
#&gt; Chain 1 finished in 2.1 seconds.
#&gt; Chain 4 finished in 2.2 seconds.
#&gt; Chain 2 finished in 2.2 seconds.
#&gt; Chain 3 finished in 2.3 seconds.
#&gt; 
#&gt; All 4 chains finished successfully.
#&gt; Mean chain execution time: 2.2 seconds.
#&gt; Total execution time: 2.7 seconds.</div><div class='output co'>#&gt; Estimated baseline parameters with 95% HPD intervals:
#&gt; 
#&gt; Table: Parameters estimates
#&gt; 
#&gt; Parameter                Mean   Median   HPD_lower   HPD_higher
#&gt; --------------------  -------  -------  ----------  -----------
#&gt; lambda[Seles]           0.529    0.522      -2.197        3.417
#&gt; lambda[Graf]            0.967    0.939      -1.746        3.761
#&gt; lambda[Sabatini]       -0.310   -0.336      -3.087        2.496
#&gt; lambda[Navratilova]     0.069    0.034      -2.714        2.869
#&gt; lambda[Sanchez]        -1.089   -1.115      -3.898        1.740
#&gt; NOTES:
#&gt; * A higher lambda indicates a higher team ability</div><div class='input'><span class='co'># }</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by David Issa Mattos, Erika Martins Silva Ramos.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


