<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Bayesian Paired comparison  regression models in Stan — bpc • bpcs</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Bayesian Paired comparison  regression models in Stan — bpc" />
<meta property="og:description" content="This is the main function of the package.
This function utilizes precompiled stan models to sample the posterior distribution of the specified model with the input data.
For more information and larger examples of usage see the vignettes." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">bpcs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/bt_random_effects.html">Random effects in the Bradley-Terry model</a>
    </li>
    <li>
      <a href="../articles/get_started.html">Getting Started with the bpcs package</a>
    </li>
    <li>
      <a href="../articles/home_advantage.html">Home advantage in the Bradley-Terry and in the Davidson model</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/davidissamattos/bpcs/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Bayesian Paired comparison  regression models in Stan</h1>
    <small class="dont-index">Source: <a href='https://github.com/davidissamattos/bpcs/blob/master/R/bpc.R'><code>R/bpc.R</code></a></small>
    <div class="hidden name"><code>bpc.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This is the main function of the package.
This function utilizes precompiled stan models to sample the posterior distribution of the specified model with the input data.
For more information and larger examples of usage see the vignettes.</p>
    </div>

    <pre class="usage"><span class='fu'>bpc</span><span class='op'>(</span>
  <span class='va'>data</span>,
  <span class='va'>player0</span>,
  <span class='va'>player1</span>,
  player0_score <span class='op'>=</span> <span class='cn'>NULL</span>,
  player1_score <span class='op'>=</span> <span class='cn'>NULL</span>,
  result_column <span class='op'>=</span> <span class='cn'>NULL</span>,
  z_player1 <span class='op'>=</span> <span class='cn'>NULL</span>,
  cluster <span class='op'>=</span> <span class='cn'>NULL</span>,
  predictors <span class='op'>=</span> <span class='cn'>NULL</span>,
  <span class='va'>model_type</span>,
  solve_ties <span class='op'>=</span> <span class='st'>"random"</span>,
  win_score <span class='op'>=</span> <span class='st'>"higher"</span>,
  priors <span class='op'>=</span> <span class='cn'>NULL</span>,
  chains <span class='op'>=</span> <span class='fl'>4</span>,
  iter <span class='op'>=</span> <span class='fl'>2000</span>,
  warmup <span class='op'>=</span> <span class='fl'>1000</span>,
  show_chain_messages <span class='op'>=</span> <span class='cn'>TRUE</span>,
  seed <span class='op'>=</span> <span class='cn'>NA</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A data frame containing the observations. The other parameters specify the name of the columns</p></td>
    </tr>
    <tr>
      <th>player0</th>
      <td><p>A string with name of the column containing the players 0. This column should be of string/character type and not be of factor type.</p></td>
    </tr>
    <tr>
      <th>player1</th>
      <td><p>A string with name of the column containing the players 0. This column should be of string/character type and not be of factor type.</p></td>
    </tr>
    <tr>
      <th>player0_score</th>
      <td><p>A string with name of the column containing the scores of players 0</p></td>
    </tr>
    <tr>
      <th>player1_score</th>
      <td><p>A string with name of the column containing the scores of players 1</p></td>
    </tr>
    <tr>
      <th>result_column</th>
      <td><p>A string with name of the column containing the winners. 0 for player 0, 1 for player 1 and 2 for ties</p></td>
    </tr>
    <tr>
      <th>z_player1</th>
      <td><p>A string with the name of the column containing the order effect for player 1. E.g. if player1 has the home advantage this column should have 1 otherwise it should have 0</p></td>
    </tr>
    <tr>
      <th>cluster</th>
      <td><p>A string with the name of the column containing the cluster for the observation. To be used with a random effects model. This column should contain strings</p></td>
    </tr>
    <tr>
      <th>predictors</th>
      <td><p>A data frame that contains the players predictors values when using a generalized model. Only numeric values are accepted. Booleans are accepted but will be cast into integers. The first column should be for the player name, the others will be the predictors.  The column names will be used as name for the predictors</p></td>
    </tr>
    <tr>
      <th>model_type</th>
      <td><ul>
<li><p>'bt' for the Bradley Terry model. Ref: Bradley-Terry 1952,</p></li>
<li><p>'davidson' the Davidson model to handle for ties. Ref: Davidson 1970</p></li>
<li><p>'btordereffect' for the Bradley-Terry with order effect (for home advantage). Ref: Davidson 1977</p></li>
<li><p>'davidsonordereffect' for the Davidson model with order effect (for home advantage) and ties. Ref: Davidson 1977</p></li>
<li><p>'btgeneralized': for the generalized Bradley Terry model for subject specific predictors</p></li>
<li><p>'davidsongeneralized' for the generalized Davidson model for subject specific predictors</p></li>
<li><p>'btU': for the Bradley-Terry with random effects</p></li>
<li><p>'davidsonU': For Davidson model with random effects</p></li>
</ul></td>
    </tr>
    <tr>
      <th>solve_ties</th>
      <td><p>A string for the method of handling ties.</p><ul>
<li><p>'random' for converting ties randomly,</p></li>
<li><p>'remove' for removing the tie occurrencess</p></li>
<li><p>'none' to ignore ties. This requires a model capable of handling  ties</p></li>
</ul></td>
    </tr>
    <tr>
      <th>win_score</th>
      <td><p>A string that indicates if which score should win</p><ul>
<li><p>'higher' score is winner</p></li>
<li><p>'lower' score is winner</p></li>
</ul></td>
    </tr>
    <tr>
      <th>priors</th>
      <td><p>A list with the parameters for the priors.</p><ul>
<li><p>'prior_lambda_mu' Mean value of the lambda parameter in the all models. For the generalized this is also the prior for the B the parameter for  lambda ~ normal(mu, std)</p></li>
<li><p>'prior_lambda_std' Standard deviation of the lambda parameter in the all models. lambda ~ normal(mu, std)</p></li>
<li><p>'prior_nu_mu' Mean value of the nu parameter in the Davidson  models. nu ~ normal(mu, std)</p></li>
<li><p>'prior_nu_std' Standard deviation ofnu parameter in the Davidson  models. nu ~ normal(mu, std). Default = 0.3</p></li>
<li><p>'prior_gm_mu' Mean value of the gm in the ordered effect model. gm ~ normal(mu, std). Default = 0</p></li>
<li><p>'prior_gm_std' Standard deviation of the gm parameter in the ordered effect model. gm ~ normal(mu, std). Default =</p></li>
<li><p>'prior_U_std' Standard deviation of the U parameter in the random effects model. U ~ normal(0, std). Default = 3.0</p></li>
</ul></td>
    </tr>
    <tr>
      <th>chains</th>
      <td><p>Number of chains passed to Stan sampling. Positive integer, default=4. For more information consult Stan documentation</p></td>
    </tr>
    <tr>
      <th>iter</th>
      <td><p>Number of iterations passed to Stan sampling. Positive integer, default =2000. For more information consult Stan documentation</p></td>
    </tr>
    <tr>
      <th>warmup</th>
      <td><p>Number of iteration for the warmup passed to Stan sampling. Positive integer, default 1000.  For more information consult Stan documentation</p></td>
    </tr>
    <tr>
      <th>show_chain_messages</th>
      <td><p>Hide chain messages from Stan</p></td>
    </tr>
    <tr>
      <th>seed</th>
      <td><p>a random seed for Stan</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of the class bpc. This object should be used in conjunction with the several auxiliary functions from the package</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Bradley RA, Terry ME (1952). “Rank Analysis of Incomplete Block Designs I: The Method of Paired Comparisons.” Biometrika, 39, 324–45.
Davidson RR (1970). “On Extending the Bradley-Terry Model to Accommodate Ties in Paired Comparison Experiments.” Journal of the American Statistical Association, 65, 317–328.
Davidson, Roger R., and Robert J. Beaver (1977). "On extending the Bradley-Terry model to incorporate within-pair order effects." Biometrics: 693-702.
Stan Development Team (2020). RStan: the R interface to Stan. R package version 2.21.2. http://mc-stan.org/.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>#For the simple Bradley-Terry model</span>
<span class='fu'>bpc</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tennis_agresti</span>,
player0 <span class='op'>=</span> <span class='st'>'player0'</span>,
player1 <span class='op'>=</span> <span class='st'>'player1'</span>,
result_column <span class='op'>=</span> <span class='st'>'y'</span>,
model_type <span class='op'>=</span> <span class='st'>'bt'</span>,
solve_ties <span class='op'>=</span> <span class='st'>'none'</span><span class='op'>)</span>
</div><div class='output co'>#&gt; 
#&gt; SAMPLING FOR MODEL 'bt' NOW (CHAIN 1).
#&gt; Chain 1: 
#&gt; Chain 1: Gradient evaluation took 4.6e-05 seconds
#&gt; Chain 1: 1000 transitions using 10 leapfrog steps per transition would take 0.46 seconds.
#&gt; Chain 1: Adjust your expectations accordingly!
#&gt; Chain 1: 
#&gt; Chain 1: 
#&gt; Chain 1: Iteration:    1 / 2000 [  0%]  (Warmup)
#&gt; Chain 1: Iteration:  200 / 2000 [ 10%]  (Warmup)
#&gt; Chain 1: Iteration:  400 / 2000 [ 20%]  (Warmup)
#&gt; Chain 1: Iteration:  600 / 2000 [ 30%]  (Warmup)
#&gt; Chain 1: Iteration:  800 / 2000 [ 40%]  (Warmup)
#&gt; Chain 1: Iteration: 1000 / 2000 [ 50%]  (Warmup)
#&gt; Chain 1: Iteration: 1001 / 2000 [ 50%]  (Sampling)
#&gt; Chain 1: Iteration: 1200 / 2000 [ 60%]  (Sampling)
#&gt; Chain 1: Iteration: 1400 / 2000 [ 70%]  (Sampling)
#&gt; Chain 1: Iteration: 1600 / 2000 [ 80%]  (Sampling)
#&gt; Chain 1: Iteration: 1800 / 2000 [ 90%]  (Sampling)
#&gt; Chain 1: Iteration: 2000 / 2000 [100%]  (Sampling)
#&gt; Chain 1: 
#&gt; Chain 1:  Elapsed Time: 0.096633 seconds (Warm-up)
#&gt; Chain 1:                0.099019 seconds (Sampling)
#&gt; Chain 1:                0.195652 seconds (Total)
#&gt; Chain 1: 
#&gt; 
#&gt; SAMPLING FOR MODEL 'bt' NOW (CHAIN 2).
#&gt; Chain 2: 
#&gt; Chain 2: Gradient evaluation took 1.5e-05 seconds
#&gt; Chain 2: 1000 transitions using 10 leapfrog steps per transition would take 0.15 seconds.
#&gt; Chain 2: Adjust your expectations accordingly!
#&gt; Chain 2: 
#&gt; Chain 2: 
#&gt; Chain 2: Iteration:    1 / 2000 [  0%]  (Warmup)
#&gt; Chain 2: Iteration:  200 / 2000 [ 10%]  (Warmup)
#&gt; Chain 2: Iteration:  400 / 2000 [ 20%]  (Warmup)
#&gt; Chain 2: Iteration:  600 / 2000 [ 30%]  (Warmup)
#&gt; Chain 2: Iteration:  800 / 2000 [ 40%]  (Warmup)
#&gt; Chain 2: Iteration: 1000 / 2000 [ 50%]  (Warmup)
#&gt; Chain 2: Iteration: 1001 / 2000 [ 50%]  (Sampling)
#&gt; Chain 2: Iteration: 1200 / 2000 [ 60%]  (Sampling)
#&gt; Chain 2: Iteration: 1400 / 2000 [ 70%]  (Sampling)
#&gt; Chain 2: Iteration: 1600 / 2000 [ 80%]  (Sampling)
#&gt; Chain 2: Iteration: 1800 / 2000 [ 90%]  (Sampling)
#&gt; Chain 2: Iteration: 2000 / 2000 [100%]  (Sampling)
#&gt; Chain 2: 
#&gt; Chain 2:  Elapsed Time: 0.100051 seconds (Warm-up)
#&gt; Chain 2:                0.093553 seconds (Sampling)
#&gt; Chain 2:                0.193604 seconds (Total)
#&gt; Chain 2: 
#&gt; 
#&gt; SAMPLING FOR MODEL 'bt' NOW (CHAIN 3).
#&gt; Chain 3: 
#&gt; Chain 3: Gradient evaluation took 1.7e-05 seconds
#&gt; Chain 3: 1000 transitions using 10 leapfrog steps per transition would take 0.17 seconds.
#&gt; Chain 3: Adjust your expectations accordingly!
#&gt; Chain 3: 
#&gt; Chain 3: 
#&gt; Chain 3: Iteration:    1 / 2000 [  0%]  (Warmup)
#&gt; Chain 3: Iteration:  200 / 2000 [ 10%]  (Warmup)
#&gt; Chain 3: Iteration:  400 / 2000 [ 20%]  (Warmup)
#&gt; Chain 3: Iteration:  600 / 2000 [ 30%]  (Warmup)
#&gt; Chain 3: Iteration:  800 / 2000 [ 40%]  (Warmup)
#&gt; Chain 3: Iteration: 1000 / 2000 [ 50%]  (Warmup)
#&gt; Chain 3: Iteration: 1001 / 2000 [ 50%]  (Sampling)
#&gt; Chain 3: Iteration: 1200 / 2000 [ 60%]  (Sampling)
#&gt; Chain 3: Iteration: 1400 / 2000 [ 70%]  (Sampling)
#&gt; Chain 3: Iteration: 1600 / 2000 [ 80%]  (Sampling)
#&gt; Chain 3: Iteration: 1800 / 2000 [ 90%]  (Sampling)
#&gt; Chain 3: Iteration: 2000 / 2000 [100%]  (Sampling)
#&gt; Chain 3: 
#&gt; Chain 3:  Elapsed Time: 0.103033 seconds (Warm-up)
#&gt; Chain 3:                0.110924 seconds (Sampling)
#&gt; Chain 3:                0.213957 seconds (Total)
#&gt; Chain 3: 
#&gt; 
#&gt; SAMPLING FOR MODEL 'bt' NOW (CHAIN 4).
#&gt; Chain 4: 
#&gt; Chain 4: Gradient evaluation took 1.5e-05 seconds
#&gt; Chain 4: 1000 transitions using 10 leapfrog steps per transition would take 0.15 seconds.
#&gt; Chain 4: Adjust your expectations accordingly!
#&gt; Chain 4: 
#&gt; Chain 4: 
#&gt; Chain 4: Iteration:    1 / 2000 [  0%]  (Warmup)
#&gt; Chain 4: Iteration:  200 / 2000 [ 10%]  (Warmup)
#&gt; Chain 4: Iteration:  400 / 2000 [ 20%]  (Warmup)
#&gt; Chain 4: Iteration:  600 / 2000 [ 30%]  (Warmup)
#&gt; Chain 4: Iteration:  800 / 2000 [ 40%]  (Warmup)
#&gt; Chain 4: Iteration: 1000 / 2000 [ 50%]  (Warmup)
#&gt; Chain 4: Iteration: 1001 / 2000 [ 50%]  (Sampling)
#&gt; Chain 4: Iteration: 1200 / 2000 [ 60%]  (Sampling)
#&gt; Chain 4: Iteration: 1400 / 2000 [ 70%]  (Sampling)
#&gt; Chain 4: Iteration: 1600 / 2000 [ 80%]  (Sampling)
#&gt; Chain 4: Iteration: 1800 / 2000 [ 90%]  (Sampling)
#&gt; Chain 4: Iteration: 2000 / 2000 [100%]  (Sampling)
#&gt; Chain 4: 
#&gt; Chain 4:  Elapsed Time: 0.10059 seconds (Warm-up)
#&gt; Chain 4:                0.091725 seconds (Sampling)
#&gt; Chain 4:                0.192315 seconds (Total)
#&gt; Chain 4: </div><div class='output co'>#&gt; Estimated baseline parameters with HPD intervals:
#&gt; 
#&gt; 
#&gt; Parameter                Mean   HPD_lower   HPD_higher     n_eff    Rhat
#&gt; --------------------  -------  ----------  -----------  --------  ------
#&gt; lambda[Seles]           0.419      -2.490        3.277   811.021   1.006
#&gt; lambda[Graf]            0.834      -1.955        3.681   790.160   1.005
#&gt; lambda[Sabatini]       -0.442      -3.309        2.336   808.931   1.005
#&gt; lambda[Navratilova]    -0.057      -3.028        2.713   793.332   1.005
#&gt; lambda[Sanchez]        -1.215      -4.138        1.537   809.149   1.005
#&gt; NOTES:
#&gt; * A higher lambda indicates a higher team ability</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by David Issa Mattos.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


