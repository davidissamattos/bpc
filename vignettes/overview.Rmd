---
title: "Overview"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{overview}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# Overview

We provide several vignette articles in the package website

Check https://davidissamattos.github.io/bpcs/ for more information

## Minimal example

```{r setup}
library(bpcs)
```

The main function of the package is the `bpc` function. For the simple Bradley-Terry model, this function requires a specific type of data frame that contains:

* Two columns containing the name of the contestants in the paired comparison
* Two columns containing the score of each player OR  one column containing the result of the match (0 if player0 won, 1 if player1 won, 2 if it was a tie)

We will utilize the tennis dataset available [@agresti2003categorical]. The dataset can be seen below and is available as `data(tennis_agresti)`:

```{r}
dplyr::sample_n(tennis_agresti,10) %>% 
  knitr::kable()
```

Based on the scores of each contestant, the `bpc` function computes automatically who won the contest. Alternatively, you can provide a vector of who won if that is already available (for more information see `?bpc`.


For the simple Bradley Terry Model we specify the model type as `'bt'`. Here we hide the MCMC sampler chain messages for simplicity in the output. 

```{r}
m<-bpc(data = tennis_agresti, #datafrane
       player0 = 'player0', #name of the column for player 0
       player1 = 'player1', #name of the column for player 1
       result_column = 'y', #name of the column for the result of the match
       model_type = 'bt', #bt = Simple Bradley Terry model
       solve_ties = 'none' #there are no ties in the dataset so we can choose none here
       )
```

If `rstan` is available and correctly working this function should sample the posterior distribution and create a `bpc` object.

To see a summary of the results we can run the summary function. Here we get three tables:

1. The parameters of the model
2. The probabilities of one player beating the other (this probability is based on the predictive posterior distribution)
3. The rank of the player based on their abilities (this rank is based on the predictive posterior ranks).

```{r}
summary(m)
```
