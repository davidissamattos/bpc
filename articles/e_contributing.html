<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>e_contributing • bpcs</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="e_contributing">
<meta property="og:description" content="bpcs">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">bpcs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/a_get_started.html">Getting Started with the bpcs package</a>
    </li>
    <li>
      <a href="../articles/b_ties_and_home_advantage.html">Home advantage in the Bradley-Terry and in the Davidson model</a>
    </li>
    <li>
      <a href="../articles/c_bt_random_effects.html">Random effects in the Bradley-Terry model</a>
    </li>
    <li>
      <a href="../articles/d_paper.html">d_paper</a>
    </li>
    <li>
      <a href="../articles/e_contributing.html">e_contributing</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/davidissamattos/bpcs/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="e_contributing_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="e_contributing_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="e_contributing_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>e_contributing</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/davidissamattos/bpcs/blob/master/vignettes/e_contributing.Rmd"><code>vignettes/e_contributing.Rmd</code></a></small>
      <div class="hidden name"><code>e_contributing.Rmd</code></div>

    </div>

    
    
<div id="contributing" class="section level1">
<h1 class="hasAnchor">
<a href="#contributing" class="anchor"></a>Contributing</h1>
<p>If you are interested you are welcome to contribute to the repository through pull requests.</p>
<p>If you have a strong need for a model that is not covered in this package (and do not want to code it yourself) send me an email or a suggestion in Github</p>
<div id="short-guidesuggestions" class="section level2">
<h2 class="hasAnchor">
<a href="#short-guidesuggestions" class="anchor"></a>Short guide/suggestions</h2>
<p>The points below are mostly reminders for me but hopefully it can help others</p>
<ul>
<li>Use the <code>devtools</code> package to create R files, test files, vignettes etc</li>
<li>In the R folder:
<ul>
<li>
<code>bpc.R</code>: this contains a single function (rather large) that is the main function call of the package. Each new model should be added here in the if else section with the appropriated data list for stan. Don’t forget to add the relevant documentation in roxygen2</li>
<li>
<code>bpc_exports.R</code>: these are helper functions to handle the <code>bpc</code> object and are exposed to the user. Only add here functions that receive a bpc object and that the users will have an interest.</li>
<li>
<code>bpc_get_probabilities.R</code> Since this is a big export function we have moved it to its own file</li>
<li>
<code>bpc_helpers_X.R</code> additional functions to facilitate and support either the bpc function or the exports functions. None of these functions should be exported, although all of them should be documented. We divided these helpers in several files. the indexes are related to creating and checking names and indexes in lookup tables, the hpd to HPDI related functions, the checks to check correct specification of the data frame columns</li>
<li>
<code>bpc_s3.R</code> all functions here are the custom implementation of the generic base functions from R, such as <code>summary</code>, <code>print</code>, <code>predict</code>
</li>
<li>
<code>data-docs.R</code> documentation for the data.</li>
<li>
<code>bpc_object.R</code> declaration and creation of the bpc class.</li>
</ul>
</li>
<li>To add new models:
<ol style="list-style-type: decimal">
<li>Add the stan file with the model in inst/stan.</li>
</ol>
<ul>
<li>Note that we add two stan files for each model, one that will estimate the parameters and one that will make predictions</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>add the appropriated hooks in the <code>bpc</code> function in <code>bpc.R</code> so we can call the model</li>
<li>add the appropriated hooks in the <code>predict</code> function in <code>bpc_s3.R</code>.</li>
<li>add the appropriated hooks for the <code>get_probabilities</code> function in <code>bpc_get_probabilities.R</code> to generate the appropriated probability table that is called in the <code>summary</code> function.</li>
<li>add the relevant tests to each of the modifications (to be improved with time, since we have very few tests now)</li>
</ol>
</li>
<li>Problems with <code>rstantools</code> and compiling the models. For me at least, the combination of <code>RStudio</code>+ <code>rstantools</code> + <code>roxygen2</code> + <code>devtools</code> + <code>Rcpp</code>+ <code>devtools</code> gives an assorted amount of stochastic errors can usually be solved with a combination of the actions below. For me it is still trial and error to fix the error but it usually works with these actions:
<ul>
<li>Restart the r session and try <code>devtools::load_all()</code> again</li>
<li>After adding a model try <code>devtools::document()</code>
</li>
<li>If deleting a model file delete the appropriated line in stanmodels.R and do document again</li>
<li>If the model is not recompiling or updating do <code><a href="https://rdrr.io/pkg/pkgbuild/man/clean_dll.html">pkgbuild::clean_dll()</a></code> then <code>devtools::document()</code> and possibly <code>devtools::load_all()</code> or <code>devtools::install()</code>
</li>
</ul>
</li>
</ul>
<p>There are some dev-functions in inst/devfunctions to help building the package website and running test coverage (and submitting to codecov).</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by David Issa Mattos, Erika Martins Silva Ramos.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
