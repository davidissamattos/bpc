<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>bpcs - A package for Bayesian Paired Comparison analysis with Stan • bpcs</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="bpcs - A package for Bayesian Paired Comparison analysis with Stan">
<meta property="og:description" content="The bpcs package provides pre compiled Stan models for the analysis of paired comparison data. The models include Bayesian versions of the Bradley-Terry model, including random effects (1 level), generalized model for predictors, order effect (home advantage) and the same variations for the Davidson (1970) model to handle ties. Additionally, we provide a number of functions to facilitate inference and obtaining results with these models.">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">bpcs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/a_get_started.html">Getting Started with the bpcs package</a>
    </li>
    <li>
      <a href="articles/b_ties_and_home_advantage.html">Home advantage in the Bradley-Terry and in the Davidson model</a>
    </li>
    <li>
      <a href="articles/c_bt_random_effects.html">Random effects in the Bradley-Terry model</a>
    </li>
    <li>
      <a href="articles/d_paper.html">d_paper</a>
    </li>
    <li>
      <a href="articles/e_contributing.html">Contributing guide</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/davidissamattos/bpcs/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<div id="bpcs---a-package-for-bayesian-paired-comparison-analysis-with-stan-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#bpcs---a-package-for-bayesian-paired-comparison-analysis-with-stan-" class="anchor"></a>bpcs - A package for Bayesian Paired Comparison analysis with Stan <img src="reference/figures/logo.png" align="right" width="120">
</h1></div>
<!-- badges: start -->

<p>The <code>bpcs</code> package performs Bayesian estimation of Paired Comparison models utilizing Stan, such as variations of the Bradley-Terry (Bradley and Terry 1952) and the Davidson models (Davidson 1970).</p>
<p>Package documentation and vignette articles can be found at: <a href="https://davidissamattos.github.io/bpcs/" class="uri">https://davidissamattos.github.io/bpcs/</a></p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>For the <code>bpcs</code> package to work, we rely upon the Stan software and the <code>rstan</code> package (Stan Development Team 2020).</p>
<ul>
<li>For general installation of Stan and RStan see: <a href="https://github.com/stan-dev/rstan" class="uri">https://github.com/stan-dev/rstan</a>
</li>
</ul>
<p>To install the latest stable version from CRAN</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'bpcs'</span><span class="op">)</span></code></pre></div>
<p>To install the development version of the bpcs package, install directly from the Github repository.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">'davidissamattos/bpcs'</span><span class="op">)</span></code></pre></div>
<p>After installing, we load the package with:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/davidissamattos/bpcs">bpcs</a></span><span class="op">)</span></code></pre></div>
</div>
<div id="minimal-example" class="section level2">
<h2 class="hasAnchor">
<a href="#minimal-example" class="anchor"></a>Minimal example</h2>
<p>The main function of the package is the <code>bpc</code> function. For the simple Bradley-Terry model, this function requires a specific type of data frame that contains:</p>
<ul>
<li>Two columns containing the name of the contestants in the paired comparison</li>
<li>Two columns containing the score of each player OR one column containing the result of the match (0 if player0 won, 1 if player1 won, 2 if it was a tie)</li>
</ul>
<p>We will utilize the tennis dataset available (Agresti 2003). The dataset can be seen below and is available as <code><a href="https://rdrr.io/r/utils/data.html">data(tennis_agresti)</a></code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html">sample_n</a></span><span class="op">(</span><span class="va">tennis_agresti</span>,<span class="fl">10</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
<p>player0</p>
</th>
<th style="text-align:left;">
<p>player1</p>
</th>
<th style="text-align:right;">
<p>y</p>
</th>
<th style="text-align:right;">
<p>id</p>
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
<p>Graf</p>
</td>
<td style="text-align:left;">
<p>Sanchez</p>
</td>
<td style="text-align:right;">
<p>0</p>
</td>
<td style="text-align:right;">
<p>28</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Seles</p>
</td>
<td style="text-align:left;">
<p>Graf</p>
</td>
<td style="text-align:right;">
<p>0</p>
</td>
<td style="text-align:right;">
<p>2</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Sabatini</p>
</td>
<td style="text-align:left;">
<p>Sanchez</p>
</td>
<td style="text-align:right;">
<p>0</p>
</td>
<td style="text-align:right;">
<p>40</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Graf</p>
</td>
<td style="text-align:left;">
<p>Sabatini</p>
</td>
<td style="text-align:right;">
<p>0</p>
</td>
<td style="text-align:right;">
<p>15</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Seles</p>
</td>
<td style="text-align:left;">
<p>Navratilova</p>
</td>
<td style="text-align:right;">
<p>1</p>
</td>
<td style="text-align:right;">
<p>12</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Graf</p>
</td>
<td style="text-align:left;">
<p>Sanchez</p>
</td>
<td style="text-align:right;">
<p>0</p>
</td>
<td style="text-align:right;">
<p>32</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Sabatini</p>
</td>
<td style="text-align:left;">
<p>Navratilova</p>
</td>
<td style="text-align:right;">
<p>0</p>
</td>
<td style="text-align:right;">
<p>35</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Graf</p>
</td>
<td style="text-align:left;">
<p>Sabatini</p>
</td>
<td style="text-align:right;">
<p>0</p>
</td>
<td style="text-align:right;">
<p>16</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Graf</p>
</td>
<td style="text-align:left;">
<p>Sabatini</p>
</td>
<td style="text-align:right;">
<p>0</p>
</td>
<td style="text-align:right;">
<p>17</p>
</td>
</tr>
<tr>
<td style="text-align:left;">
<p>Seles</p>
</td>
<td style="text-align:left;">
<p>Navratilova</p>
</td>
<td style="text-align:right;">
<p>1</p>
</td>
<td style="text-align:right;">
<p>10</p>
</td>
</tr>
</tbody>
</table>
<p>Based on the scores of each contestant, the <code>bpc</code> function computes automatically who won the contest. Alternatively, you can provide a vector of who won if that is already available (for more information see <code><a href="reference/bpc.html">?bpc</a></code>.</p>
<p>For the simple Bradley Terry Model we specify the model type as <code>'bt'</code>. Here we hide the MCMC sampler chain messages for simplicity in the output.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">m</span><span class="op">&lt;-</span><span class="fu"><a href="reference/bpc.html">bpc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">tennis_agresti</span>, <span class="co">#datafrane</span>
       player0 <span class="op">=</span> <span class="st">'player0'</span>, <span class="co">#name of the column for player 0</span>
       player1 <span class="op">=</span> <span class="st">'player1'</span>, <span class="co">#name of the column for player 1</span>
       result_column <span class="op">=</span> <span class="st">'y'</span>, <span class="co">#name of the column for the result of the match</span>
       model_type <span class="op">=</span> <span class="st">'bt'</span>, <span class="co">#bt = Simple Bradley Terry model</span>
       solve_ties <span class="op">=</span> <span class="st">'none'</span> <span class="co">#there are no ties in the dataset so we can choose none here</span>
       <span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; SAMPLING FOR MODEL 'bt' NOW (CHAIN 1).</span>
<span class="co">#&gt; Chain 1: </span>
<span class="co">#&gt; Chain 1: Gradient evaluation took 0.000135 seconds</span>
<span class="co">#&gt; Chain 1: 1000 transitions using 10 leapfrog steps per transition would take 1.35 seconds.</span>
<span class="co">#&gt; Chain 1: Adjust your expectations accordingly!</span>
<span class="co">#&gt; Chain 1: </span>
<span class="co">#&gt; Chain 1: </span>
<span class="co">#&gt; Chain 1: Iteration:    1 / 2000 [  0%]  (Warmup)</span>
<span class="co">#&gt; Chain 1: Iteration:  200 / 2000 [ 10%]  (Warmup)</span>
<span class="co">#&gt; Chain 1: Iteration:  400 / 2000 [ 20%]  (Warmup)</span>
<span class="co">#&gt; Chain 1: Iteration:  600 / 2000 [ 30%]  (Warmup)</span>
<span class="co">#&gt; Chain 1: Iteration:  800 / 2000 [ 40%]  (Warmup)</span>
<span class="co">#&gt; Chain 1: Iteration: 1000 / 2000 [ 50%]  (Warmup)</span>
<span class="co">#&gt; Chain 1: Iteration: 1001 / 2000 [ 50%]  (Sampling)</span>
<span class="co">#&gt; Chain 1: Iteration: 1200 / 2000 [ 60%]  (Sampling)</span>
<span class="co">#&gt; Chain 1: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span>
<span class="co">#&gt; Chain 1: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span>
<span class="co">#&gt; Chain 1: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span>
<span class="co">#&gt; Chain 1: Iteration: 2000 / 2000 [100%]  (Sampling)</span>
<span class="co">#&gt; Chain 1: </span>
<span class="co">#&gt; Chain 1:  Elapsed Time: 0.384575 seconds (Warm-up)</span>
<span class="co">#&gt; Chain 1:                0.413474 seconds (Sampling)</span>
<span class="co">#&gt; Chain 1:                0.798049 seconds (Total)</span>
<span class="co">#&gt; Chain 1: </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; SAMPLING FOR MODEL 'bt' NOW (CHAIN 2).</span>
<span class="co">#&gt; Chain 2: </span>
<span class="co">#&gt; Chain 2: Gradient evaluation took 4.3e-05 seconds</span>
<span class="co">#&gt; Chain 2: 1000 transitions using 10 leapfrog steps per transition would take 0.43 seconds.</span>
<span class="co">#&gt; Chain 2: Adjust your expectations accordingly!</span>
<span class="co">#&gt; Chain 2: </span>
<span class="co">#&gt; Chain 2: </span>
<span class="co">#&gt; Chain 2: Iteration:    1 / 2000 [  0%]  (Warmup)</span>
<span class="co">#&gt; Chain 2: Iteration:  200 / 2000 [ 10%]  (Warmup)</span>
<span class="co">#&gt; Chain 2: Iteration:  400 / 2000 [ 20%]  (Warmup)</span>
<span class="co">#&gt; Chain 2: Iteration:  600 / 2000 [ 30%]  (Warmup)</span>
<span class="co">#&gt; Chain 2: Iteration:  800 / 2000 [ 40%]  (Warmup)</span>
<span class="co">#&gt; Chain 2: Iteration: 1000 / 2000 [ 50%]  (Warmup)</span>
<span class="co">#&gt; Chain 2: Iteration: 1001 / 2000 [ 50%]  (Sampling)</span>
<span class="co">#&gt; Chain 2: Iteration: 1200 / 2000 [ 60%]  (Sampling)</span>
<span class="co">#&gt; Chain 2: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span>
<span class="co">#&gt; Chain 2: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span>
<span class="co">#&gt; Chain 2: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span>
<span class="co">#&gt; Chain 2: Iteration: 2000 / 2000 [100%]  (Sampling)</span>
<span class="co">#&gt; Chain 2: </span>
<span class="co">#&gt; Chain 2:  Elapsed Time: 0.361947 seconds (Warm-up)</span>
<span class="co">#&gt; Chain 2:                0.396465 seconds (Sampling)</span>
<span class="co">#&gt; Chain 2:                0.758412 seconds (Total)</span>
<span class="co">#&gt; Chain 2: </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; SAMPLING FOR MODEL 'bt' NOW (CHAIN 3).</span>
<span class="co">#&gt; Chain 3: </span>
<span class="co">#&gt; Chain 3: Gradient evaluation took 4.5e-05 seconds</span>
<span class="co">#&gt; Chain 3: 1000 transitions using 10 leapfrog steps per transition would take 0.45 seconds.</span>
<span class="co">#&gt; Chain 3: Adjust your expectations accordingly!</span>
<span class="co">#&gt; Chain 3: </span>
<span class="co">#&gt; Chain 3: </span>
<span class="co">#&gt; Chain 3: Iteration:    1 / 2000 [  0%]  (Warmup)</span>
<span class="co">#&gt; Chain 3: Iteration:  200 / 2000 [ 10%]  (Warmup)</span>
<span class="co">#&gt; Chain 3: Iteration:  400 / 2000 [ 20%]  (Warmup)</span>
<span class="co">#&gt; Chain 3: Iteration:  600 / 2000 [ 30%]  (Warmup)</span>
<span class="co">#&gt; Chain 3: Iteration:  800 / 2000 [ 40%]  (Warmup)</span>
<span class="co">#&gt; Chain 3: Iteration: 1000 / 2000 [ 50%]  (Warmup)</span>
<span class="co">#&gt; Chain 3: Iteration: 1001 / 2000 [ 50%]  (Sampling)</span>
<span class="co">#&gt; Chain 3: Iteration: 1200 / 2000 [ 60%]  (Sampling)</span>
<span class="co">#&gt; Chain 3: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span>
<span class="co">#&gt; Chain 3: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span>
<span class="co">#&gt; Chain 3: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span>
<span class="co">#&gt; Chain 3: Iteration: 2000 / 2000 [100%]  (Sampling)</span>
<span class="co">#&gt; Chain 3: </span>
<span class="co">#&gt; Chain 3:  Elapsed Time: 0.355104 seconds (Warm-up)</span>
<span class="co">#&gt; Chain 3:                0.362399 seconds (Sampling)</span>
<span class="co">#&gt; Chain 3:                0.717503 seconds (Total)</span>
<span class="co">#&gt; Chain 3: </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; SAMPLING FOR MODEL 'bt' NOW (CHAIN 4).</span>
<span class="co">#&gt; Chain 4: </span>
<span class="co">#&gt; Chain 4: Gradient evaluation took 4.1e-05 seconds</span>
<span class="co">#&gt; Chain 4: 1000 transitions using 10 leapfrog steps per transition would take 0.41 seconds.</span>
<span class="co">#&gt; Chain 4: Adjust your expectations accordingly!</span>
<span class="co">#&gt; Chain 4: </span>
<span class="co">#&gt; Chain 4: </span>
<span class="co">#&gt; Chain 4: Iteration:    1 / 2000 [  0%]  (Warmup)</span>
<span class="co">#&gt; Chain 4: Iteration:  200 / 2000 [ 10%]  (Warmup)</span>
<span class="co">#&gt; Chain 4: Iteration:  400 / 2000 [ 20%]  (Warmup)</span>
<span class="co">#&gt; Chain 4: Iteration:  600 / 2000 [ 30%]  (Warmup)</span>
<span class="co">#&gt; Chain 4: Iteration:  800 / 2000 [ 40%]  (Warmup)</span>
<span class="co">#&gt; Chain 4: Iteration: 1000 / 2000 [ 50%]  (Warmup)</span>
<span class="co">#&gt; Chain 4: Iteration: 1001 / 2000 [ 50%]  (Sampling)</span>
<span class="co">#&gt; Chain 4: Iteration: 1200 / 2000 [ 60%]  (Sampling)</span>
<span class="co">#&gt; Chain 4: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span>
<span class="co">#&gt; Chain 4: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span>
<span class="co">#&gt; Chain 4: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span>
<span class="co">#&gt; Chain 4: Iteration: 2000 / 2000 [100%]  (Sampling)</span>
<span class="co">#&gt; Chain 4: </span>
<span class="co">#&gt; Chain 4:  Elapsed Time: 0.345782 seconds (Warm-up)</span>
<span class="co">#&gt; Chain 4:                0.368142 seconds (Sampling)</span>
<span class="co">#&gt; Chain 4:                0.713924 seconds (Total)</span>
<span class="co">#&gt; Chain 4:</span>
<span class="co">#&gt; Warning: Tail Effective Samples Size (ESS) is too low, indicating posterior variances and tail quantiles may be unreliable.</span>
<span class="co">#&gt; Running the chains for more iterations may help. See</span>
<span class="co">#&gt; http://mc-stan.org/misc/warnings.html#tail-ess</span></code></pre></div>
<p>If <code>rstan</code> is available and correctly working this function should sample the posterior distribution and create a <code>bpc</code> object.</p>
<p>To see a summary of the results we can run the summary function. Here we get three tables:</p>
<ol>
<li>The parameters of the model</li>
<li>The probabilities of one player beating the other (this probability is based on the predictive posterior distribution)</li>
<li>The rank of the player based on their abilities (this rank is based on the predictive posterior ranks).</li>
</ol>
<!-- end list --><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span>
<span class="co">#&gt; Estimated baseline parameters with HPD intervals:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Table: Parameters estimates</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Parameter               Mean   HPD_lower   HPD_higher</span>
<span class="co">#&gt; --------------------  ------  ----------  -----------</span>
<span class="co">#&gt; lambda[Seles]           0.46       -2.27         3.30</span>
<span class="co">#&gt; lambda[Graf]            0.90       -1.94         3.59</span>
<span class="co">#&gt; lambda[Sabatini]       -0.38       -3.16         2.39</span>
<span class="co">#&gt; lambda[Navratilova]     0.01       -2.90         2.68</span>
<span class="co">#&gt; lambda[Sanchez]        -1.16       -3.81         1.75</span>
<span class="co">#&gt; NOTES:</span>
<span class="co">#&gt; * A higher lambda indicates a higher team ability</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Posterior probabilities:</span>
<span class="co">#&gt; These probabilities are calculated from the predictive posterior distribution</span>
<span class="co">#&gt; for all player combinations</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Table: Estimated posterior probabilites</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; i             j              i_beats_j   j_beats_i</span>
<span class="co">#&gt; ------------  ------------  ----------  ----------</span>
<span class="co">#&gt; Graf          Navratilova         0.30        0.70</span>
<span class="co">#&gt; Graf          Sabatini            0.23        0.77</span>
<span class="co">#&gt; Graf          Sanchez             0.12        0.88</span>
<span class="co">#&gt; Graf          Seles               0.40        0.60</span>
<span class="co">#&gt; Navratilova   Sabatini            0.42        0.58</span>
<span class="co">#&gt; Navratilova   Sanchez             0.26        0.74</span>
<span class="co">#&gt; Navratilova   Seles               0.61        0.39</span>
<span class="co">#&gt; Sabatini      Sanchez             0.33        0.67</span>
<span class="co">#&gt; Sabatini      Seles               0.68        0.32</span>
<span class="co">#&gt; Sanchez       Seles               0.81        0.19</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Rank of the players' abilities:</span>
<span class="co">#&gt; The rank is based on the posterior rank distribution of the lambda parameter</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Table: Estimated posterior ranks</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Parameter              MedianRank   MeanRank   StdRank</span>
<span class="co">#&gt; --------------------  -----------  ---------  --------</span>
<span class="co">#&gt; lambda[Graf]                    1       1.37      0.61</span>
<span class="co">#&gt; lambda[Seles]                   2       2.19      0.93</span>
<span class="co">#&gt; lambda[Navratilova]             3       3.00      0.92</span>
<span class="co">#&gt; lambda[Sabatini]                4       3.64      0.85</span>
<span class="co">#&gt; lambda[Sanchez]                 5       4.80      0.49</span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">m</span>, rotate_x_labels <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-8-1.png" width="100%"></p>
</div>
</div>
<div id="features-of-the-bpcs-package" class="section level1">
<h1 class="hasAnchor">
<a href="#features-of-the-bpcs-package" class="anchor"></a>Features of the bpcs package</h1>
<ul>
<li>Bayesian computation of different variations of the Bradley-Terry (including with home advantage, random effects and the generalized model).</li>
<li>Bayesian computation of different variations of the Davidson model to handle ties in the contest (including with home advantage, random effects and the generalized model).</li>
<li>Accepts a column with the results of the contest or the scores for each player.</li>
<li>Customize a normal prior distribution for every parameter.</li>
<li>Compute HDP interval for every parameter with the <code>get_parameters</code> function</li>
<li>Compute rank of the players with the <code>get_rank_of_players_df</code> function.</li>
<li>Compute all the probability combinations for one player beating the other with the <code>get_probabilities_df</code> function.</li>
<li>Convert aggregated tables of results into long format (one contest per row) with the <code>expand_aggregated_data.</code>
</li>
<li>Obtain the posterior distribution for every parameter of the model with the <code>get_sample_posterior</code> function.</li>
<li>Easy predictions using the <code>predict</code> function.</li>
<li>We do not reinforce any table or plotting library! Results are returned as data frames for easier plotting and creating tables</li>
<li>We reinforce the need to manually specify the model to be used.</li>
</ul>
<div id="models-available" class="section level2">
<h2 class="hasAnchor">
<a href="#models-available" class="anchor"></a>Models available</h2>
<ul>
<li>Bradley-Terry (<code>bt</code>) (Bradley and Terry 1952)</li>
<li>Davidson model (<code>davidson</code>) for handling ties (Davidson 1970)</li>
</ul>
<p>Options to add to the models:</p>
<ul>
<li>Order effect (<code>-ordereffect</code>). E.g. for home advantage (Davidson and Beaver 1977)</li>
<li>Generalized models (<code>-generalized</code>). When we have contestant specific predictors (Springall 1973)</li>
<li>Intercept random effects (<code>-U</code>). For example, to compensate clustering or repeated measures (Böckenholt 2001)</li>
</ul>
<p>E.g.:</p>
<ul>
<li>Simple BT model: <code>bt</code>
</li>
<li>Davidson model with random effects: <code>davidson-U</code>
</li>
<li>Generalized BT model with order effect: <code>bt-generalized-ordereffect</code>
</li>
</ul>
<p>Notes:</p>
<ul>
<li>The model type should be first</li>
<li>The order of the options do not matter: <code>bt-U-ordereffect</code> is equivalent to <code>bt-ordereffect-U</code>
</li>
<li>The <code><a href="https://rdrr.io/r/base/Arithmetic.html">-</a></code> is mandatory</li>
</ul>
</div>
</div>
<div id="vignettes" class="section level1">
<h1 class="hasAnchor">
<a href="#vignettes" class="anchor"></a>Vignettes</h1>
<p>This package provides a series of small and self contained vignettes that exemplify the use of each model. In the vignettes, we also provide examples of code for data transformation, tables and plots.</p>
<p>Below we list all our vignettes with a short description:</p>
<ul>
<li><p><a href="https://davidissamattos.github.io/bpcs/articles/a_get_started.html">Getting Started</a>: This vignette shows a basic example on tennis competition data, covering how to run a Bradley-Terry model, MCMC diagnostics, posterior predictive values, ranking, predict new matches</p></li>
<li><p><a href="https://davidissamattos.github.io/bpcs/articles/b_ties_and_home_advantage.html">Ties and home advantage</a>: This vignette covers a soccer example from the Brazilian soccer league. Here, we first model the results using a Bradley-Terry model and the Davidson model to handle ties. Then, we extend both models to include for order effects, this allows us to investigate the home advantage in and without the presence of ties.</p></li>
<li><p><a href="https://davidissamattos.github.io/bpcs/articles/c_bt_random_effects.html">Bradley-Terry with random effects</a>: This vignette covers the problem of ranking black-box optimization algorithms based on benchmarks. Since in benchmarking we often run the same optimization algorithm more than once with the same benchmark problem, we need to compensate for the repeated measures effect. We deal with this utilizing a simple Bradley-Terry model with random effects.</p></li>
</ul>
<!-- * [Generalized Bradley-Terry model](): This vignette investigate the Bradley-Terry model when we have players specific characteristics. (TODO) --><!-- * [Paper](): This paper/vignette describes the theory and related work behind the presented models. TODO -->
</div>
<div id="contributing-and-bugs" class="section level1">
<h1 class="hasAnchor">
<a href="#contributing-and-bugs" class="anchor"></a>Contributing and bugs</h1>
<p>If you are interested you are welcome to contribute to the repository through pull requests.</p>
<p>We have a short <a href="https://davidissamattos.github.io/bpcs/articles/e_contributing.html">contributing guide vignette</a>.</p>
<p>If you find bugs, please report it in <a href="https://github.com/davidissamattos/bpcs/issues" class="uri">https://github.com/davidissamattos/bpcs/issues</a></p>
</div>
<div id="icon-credits" class="section level1">
<h1 class="hasAnchor">
<a href="#icon-credits" class="anchor"></a>Icon credits</h1>
<ul>
<li>Boxing gloves image by “surang” from “flaticons.com”</li>
<li>Hex Sticker created with the <a href="https://github.com/GuangchuangYu/hexSticker">hexSticker</a> package</li>
</ul>
</div>
<div id="references" class="section level1">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<div id="refs" class="references">
<div id="ref-agresti2003categorical">
<p>Agresti, Alan. 2003. <em>Categorical Data Analysis</em>. Vol. 482. John Wiley &amp; Sons.</p>
</div>
<div id="ref-bockenholt2001hierarchical">
<p>Böckenholt, Ulf. 2001. “Hierarchical Modeling of Paired Comparison Data.” <em>Psychological Methods</em> 6 (1): 49.</p>
</div>
<div id="ref-bradley1952rank">
<p>Bradley, Ralph Allan, and Milton E Terry. 1952. “Rank Analysis of Incomplete Block Designs: I. The Method of Paired Comparisons.” <em>Biometrika</em> 39 (3/4): 324–45.</p>
</div>
<div id="ref-davidson1970extending">
<p>Davidson, Roger R. 1970. “On Extending the Bradley-Terry Model to Accommodate Ties in Paired Comparison Experiments.” <em>Journal of the American Statistical Association</em> 65 (329): 317–28.</p>
</div>
<div id="ref-davidson1977extending">
<p>Davidson, Roger R, and Robert J Beaver. 1977. “On Extending the Bradley-Terry Model to Incorporate Within-Pair Order Effects.” <em>Biometrics</em>, 693–702.</p>
</div>
<div id="ref-springall1973response">
<p>Springall, A. 1973. “Response Surface Fitting Using a Generalization of the Bradley-Terry Paired Comparison Model.” <em>Journal of the Royal Statistical Society: Series C (Applied Statistics)</em> 22 (1): 59–68.</p>
</div>
<div id="ref-rstan">
<p>Stan Development Team. 2020. “RStan: The R Interface to Stan.” <a href="https://mc-stan.org/" class="uri">https://mc-stan.org/</a>.</p>
</div>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=bpcs">https://​cloud.r-project.org/​package=bpcs</a>
</li>
<li>Browse source code at <br><a href="https://github.com/davidissamattos/bpcs/">https://​github.com/​davidissamattos/​bpcs/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/davidissamattos/bpcs/issues">https://​github.com/​davidissamattos/​bpcs/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing bpcs</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>David Issa Mattos <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-2501-9926" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Erika Martins Silva Ramos <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-7393-1410" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/web/licenses/MIT"><img src="https://img.shields.io/badge/license-MIT-yellow.svg" alt="License: MIT"></a></li>
<li><a href="https://github.com/davidissamattos/bpcs/commits/master"><img src="https://img.shields.io/github/last-commit/davidissamattos/bpcs.svg"></a></li>
<li><a href="https://www.tidyverse.org/lifecycle/#stable"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg"></a></li>
<li><a href="https://github.com/davidissamattos/bpcs"><img src="https://img.shields.io/github/languages/code-size/davidissamattos/bpcs.svg"></a></li>
<li><a href="https://github.com/davidissamattos/bpcs"><img src="https://img.shields.io/badge/devel%20version-1.0.1-blue.svg"></a></li>
<li><a href="https://cran.r-project.org/package=bpcs"><img src="https://www.r-pkg.org/badges/version/bpcs?color=blue"></a></li>
<li><a href="https://codecov.io/gh/davidissamattos/bpcs"><img src="https://codecov.io/gh/davidissamattos/bpcs/branch/master/graph/badge.svg"></a></li>
<li><a href="https://github.com/davidissamattos/bpcs/actions"><img src="https://github.com/davidissamattos/bpcs/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by David Issa Mattos, Erika Martins Silva Ramos.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
